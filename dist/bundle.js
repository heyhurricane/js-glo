(()=>{"use strict";var e,t,n,o,a,r,c,l,i,s,u,d,m,v,f;u=document.querySelector("#timer-hours"),d=document.querySelector("#timer-minutes"),m=document.querySelector("#timer-seconds"),v=function(e){return 1===e.length&&(e="0"+e),e},(f=function(){var e,t,n,o,a=(e=(new Date("05 Jan 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60).toString(),n=Math.floor(e/60%60).toString(),o=Math.floor(e/60/60).toString(),t=v(t),n=v(n),{timeRemaining:e,hours:o=v(o),minutes:n,seconds:t});u.textContent=a.hours,d.textContent=a.minutes,m.textContent=a.seconds,a.timeRemaining<=0&&(u.textContent="00",d.textContent="00",m.textContent="00",clearInterval(s))})(),s=setInterval(f,1e3),function(){document.querySelector(".menu");var e=document.querySelector("menu"),t=(document.querySelector(".close-btn"),e.querySelectorAll("ul>li>a")),n=!1,o=function(){e.classList.toggle("active-menu"),n=!n};document.body.addEventListener("click",(function(e){var a=e.target;(a=a.closest(".menu"))||!(a=(a=e.target).closest(".active-menu"))&&n?o():(a=e.target,t.forEach((function(e){(a.classList.contains("close-btn")||e===a)&&o()})))}))}(),a=document.querySelector(".popup-content"),r=0,c=document.querySelector(".popup"),l=document.querySelectorAll(".popup-btn"),i=function e(){o=requestAnimationFrame(e),r+=3;var t=window.screen.width,n=parseInt(a.style.left);isNaN(n)&&(n=0);var c=.38*t;t<768?(cancelAnimationFrame(o),a.style.left="30%"):n<c?a.style.left=2*r+"px":cancelAnimationFrame(o)},l.forEach((function(e){e.addEventListener("click",(function(){o=requestAnimationFrame(i),c.style.display="block"}))})),c.addEventListener("click",(function(e){var t=e.target,n=c.querySelectorAll("input");t.classList.contains("popup-close")?(c.style.display="none",r=0,a.style.left=r+"px",n.forEach((function(e){e.value=""}))):(t=t.closest(".popup-content"))||(c.style.display="none",r=0,a.style.left=r+"px",n.forEach((function(e){e.value=""})))})),document.querySelectorAll('a[href*="#"]').forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href").substr(1);"close"!==n&&document.getElementById(n).scrollIntoView({behavior:"smooth",block:"start"})}))})),e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab"),e.addEventListener("click",(function(e){var o=e.target;(o=o.closest(".service-header-tab"))&&t.forEach((function(e,a){e===o&&function(e){for(var o=0;o<n.length;o++)e===o?(n[o].classList.remove("d-none"),t[o].classList.add("active")):(n[o].classList.add("d-none"),t[o].classList.remove("active"))}(a)}))})),function(){for(var e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),n=document.querySelector(".portfolio-content"),o=0;o<e.length;o++){var a=document.createElement("li");a.classList.add("dot"),t.append(a)}var r=document.querySelectorAll(".dot");r[0].classList.add("dot-active");var c,l=0,i=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},u=function(){i(e,l,"portfolio-item-active"),i(r,l,"dot-active"),++l>=e.length&&(l=0),s(e,l,"portfolio-item-active"),s(r,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;c=setInterval(u,e)};n.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(i(e,l,"portfolio-item-active"),i(r,l,"dot-active"),n.matches("#arrow-right")?l++:n.matches("#arrow-left")?l--:n.matches(".dot")&&r.forEach((function(e,t){e===n&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),s(e,l,"portfolio-item-active"),s(r,l,"dot-active"))})),d(1500),n.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(c)})),n.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&d(1500)}))}(),document.querySelectorAll(".command__photo").forEach((function(e){e.addEventListener("mouseenter",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t})),e.addEventListener("mouseleave",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),function(){document.querySelectorAll("input.calc-item").forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^\d]/,"")}))})),document.querySelectorAll(".form-phone").forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^\d\+]/,"")}))})),document.querySelectorAll('[name="user_name"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яА-Я\s]/,"")}))}));var e=document.querySelector('[name="user_message"]');e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яА-Я\s\W\d]/,"")}))}(),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),l=document.getElementById("total"),i=!1,s=function(t,n,o){if(n!==o){var a=n;i=!0,e=setInterval((function(){o.toString().length>=5?a+=a<o-o%1e3?1e3:a<o-o%100?100:10:a+=10,a>=o?(i=!1,clearInterval(e),t.textContent=o):t.textContent=a}),1)}},u=function(){var n=0,u=1,d=1,m=o.options[o.selectedIndex].value,v=+a.value;r.value>1&&(u+=(r.value-1)/10),c.value&&c.value<5?d*=2:c.value&&c.value<10&&(d*=1.5),m&&v&&(n=Math.round(t*m*v*u*d)),i&&(clearInterval(e),l.textContent=0),s(l,0,n)};n.addEventListener("change",(function(e){var t=e.target;""===t.value&&(document.getElementById("total").textContent=0),(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-day")||t.matches(".calc-count"))&&u()}))}(100),function(){var e=document.querySelectorAll('[name="user_form"]'),t=document.querySelector(".popup"),n=document.createElement("div");n.style.cssText="font-size: 2rem;",e.forEach((function(e){e.addEventListener("submit",(function(o){o.preventDefault(),"form3"===e.getAttribute("id")&&(n.style.color="#FFF"),n.textContent="";var a=e.querySelectorAll("input"),r=0;if(a.forEach((function(t){var n=document.createElement("div");n.classList.add("mistake"),4===t.parentNode.childNodes.length&&t.parentNode.childNodes[3].remove(),n.style.cssText="font-size: 1rem; color: red;","form1"===e.getAttribute("id")&&(n.style.cssText+="margin-top: -2rem;"),(t.classList.contains("form-name")||t.classList.contains("top-form"))&&(t.value.length<2||t.value.length>50)&&(n.textContent="Имя должно быть от 2 до 50 символов",t.parentNode.append(n),r++),t.classList.contains("form-phone")&&t.value.length<11&&(n.textContent="Номер должен содержать 11 символов",t.parentNode.append(n),r++),t.classList.contains("form-email")&&!t.value.match(/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/)&&(n.textContent="Введите в формте: name@domain.com",t.parentNode.append(n),r++)})),0===r){n.classList.add("preloader__row");var c=document.createElement("div");c.classList.add("preloader__item"),n.appendChild(c),n.appendChild(c),n.classList.add("loaded"),e.append(n);var l=new FormData(e),i={};l.forEach((function(e,t){i[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(i).then((function(o){if(200!==o.status)throw new Error("Status network isn't 200");n.classList.remove("preloader__row"),n.classList.remove("loaded"),n.textContent="Спасибо! Мы скоро с Вами свяжемся",a.forEach((function(e){e.value=""})),setTimeout((function(){n.textContent="","form3"===e.getAttribute("id")&&(t.style.display="none")}),4e3)})).catch((function(e){n.classList.remove("preloader__row"),n.classList.remove("loaded"),n.textContent="Что-то пошло не так...",console.error(e),setTimeout((function(){n.textContent=""}),4e3)}))}}))}))}()})();