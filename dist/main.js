(()=>{"use strict";(e=>{let t,o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds");const r=e=>(1===e.length&&(e="0"+e),e),c=()=>{let e=(()=>{let e=(new Date("05 Jan 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60).toString(),o=Math.floor(e/60%60).toString(),n=Math.floor(e/60/60).toString();return t=r(t),o=r(o),n=r(n),{timeRemaining:e,hours:n,minutes:o,seconds:t}})();o.textContent=e.hours,n.textContent=e.minutes,a.textContent=e.seconds,e.timeRemaining<=0&&(o.textContent="00",n.textContent="00",a.textContent="00",clearInterval(t))};c(),t=setInterval(c,1e3)})(),(()=>{document.querySelector(".menu");const e=document.querySelector("menu"),t=(document.querySelector(".close-btn"),e.querySelectorAll("ul>li>a"));let o=!1;const n=()=>{e.classList.toggle("active-menu"),o=!o};document.body.addEventListener("click",(e=>{let a=e.target;a=a.closest(".menu"),a?n():(a=e.target,a=a.closest(".active-menu"),!a&&o?n():(a=e.target,t.forEach((e=>{(a.classList.contains("close-btn")||e===a)&&n()}))))}))})(),(()=>{const e=document.querySelector(".popup-content");let t,o=0;const n=document.querySelector(".popup"),a=document.querySelectorAll(".popup-btn"),r=()=>{t=requestAnimationFrame(r),o+=3;const n=window.screen.width;let a=parseInt(e.style.left);isNaN(a)&&(a=0);const c=.38*n;n<768?(cancelAnimationFrame(t),e.style.left="30%"):a<c?e.style.left=2*o+"px":cancelAnimationFrame(t)};a.forEach((e=>{e.addEventListener("click",(()=>{t=requestAnimationFrame(r),n.style.display="block"}))})),n.addEventListener("click",(t=>{let a=t.target;const r=n.querySelectorAll("input");a.classList.contains("popup-close")?(n.style.display="none",o=0,e.style.left=o+"px",r.forEach((e=>{e.value=""}))):(a=a.closest(".popup-content"),a||(n.style.display="none",o=0,e.style.left=o+"px",r.forEach((e=>{e.value=""}))))}))})(),document.querySelectorAll('a[href*="#"]').forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href").substr(1);"close"!==o&&document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,a)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(o[n].classList.remove("d-none"),t[n].classList.add("active")):(o[n].classList.add("d-none"),t[n].classList.remove("active"))})(a)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),o=document.querySelector(".portfolio-content");for(let o=0;o<e.length;o++){const e=document.createElement("li");e.classList.add("dot"),t.append(e)}const n=document.querySelectorAll(".dot");n[0].classList.add("dot-active");let a,r=0;const c=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},s=()=>{c(e,r,"portfolio-item-active"),c(n,r,"dot-active"),r++,r>=e.length&&(r=0),l(e,r,"portfolio-item-active"),l(n,r,"dot-active")},d=(e=3e3)=>{a=setInterval(s,e)};o.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(c(e,r,"portfolio-item-active"),c(n,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(r=t)})),r>=e.length&&(r=0),r<0&&(r=e.length-1),l(e,r,"portfolio-item-active"),l(n,r,"dot-active"))})),d(1500),o.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(a)})),o.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&d(1500)}))})(),document.querySelectorAll(".command__photo").forEach((e=>{e.addEventListener("mouseenter",(e=>{const t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t})),e.addEventListener("mouseleave",(e=>{const t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),(()=>{document.querySelectorAll("input.calc-item").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^\d]/,"")}))})),document.querySelectorAll(".form-phone").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^\d\+]/,"")}))})),document.querySelectorAll('[name="user_name"]').forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я\s]/,"")}))}));const e=document.querySelector('[name="user_message"]');e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я\.\,\!\?\;\:\"\s\d]/,"")}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),c=document.getElementById("total");let l,s=!1;t.addEventListener("change",(t=>{const d=t.target;""===d.value&&(document.getElementById("total").textContent=0),(d.matches(".calc-type")||d.matches(".calc-square")||d.matches(".calc-day")||d.matches(".calc-count"))&&(()=>{let t=0,d=1,i=1;const u=o.options[o.selectedIndex].value,m=+n.value;a.value>1&&(d+=(a.value-1)/10),r.value&&r.value<5?i*=2:r.value&&r.value<10&&(i*=1.5),u&&m&&(t=Math.round(e*u*m*d*i)),s&&(clearInterval(l),c.textContent=0),((e,t,o)=>{if(0===o)return;let n=0;s=!0,l=setInterval((function(){o.toString().length>=5?n+=n<o-o%1e3?1e3:n<o-o%100?100:10:n+=10,n>=o?(s=!1,clearInterval(l),e.textContent=o):e.textContent=n}),1)})(c,0,t)})()}))})(100),(()=>{const e=document.querySelectorAll('[name="user_form"]'),t=document.querySelector(".popup"),o=document.createElement("div");o.style.cssText="font-size: 2rem;",e.forEach((e=>{e.addEventListener("submit",(n=>{n.preventDefault(),"form3"===e.getAttribute("id")&&(o.style.color="#FFF"),o.textContent="";const a=e.querySelectorAll("input");let r=0;if(a.forEach((t=>{const o=document.createElement("div");o.classList.add("mistake"),4===t.parentNode.childNodes.length&&t.parentNode.childNodes[3].remove(),o.style.cssText="font-size: 1rem; color: red;","form1"===e.getAttribute("id")&&(o.style.cssText+="margin-top: -2rem;"),(t.classList.contains("form-name")||t.classList.contains("top-form"))&&(t.value.length<2||t.value.length>50)&&(o.textContent="Имя должно быть от 2 до 50 символов",t.parentNode.append(o),r++),t.classList.contains("form-phone")&&t.value.length<11&&(o.textContent="Номер должен содержать 11 символов",t.parentNode.append(o),r++),t.classList.contains("form-email")&&!t.value.match(/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/)&&(o.textContent="Введите в формте: name@domain.com",t.parentNode.append(o),r++)})),0===r){o.classList.add("preloader__row");const n=document.createElement("div");n.classList.add("preloader__item"),o.appendChild(n),o.appendChild(n),o.classList.add("loaded"),e.append(o);const r=new FormData(e);let c={};r.forEach(((e,t)=>{c[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((n=>{if(200!==n.status)throw new Error("Status network isn't 200");o.classList.remove("preloader__row"),o.classList.remove("loaded"),o.textContent="Спасибо! Мы скоро с Вами свяжемся",a.forEach((e=>{e.value=""})),setTimeout((()=>{o.textContent="","form3"===e.getAttribute("id")&&(t.style.display="none")}),4e3)})).catch((e=>{o.classList.remove("preloader__row"),o.classList.remove("loaded"),o.textContent="Что-то пошло не так...",console.error(e),setTimeout((()=>{o.textContent=""}),4e3)}))}}))}))})()})();